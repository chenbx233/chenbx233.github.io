<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <!-- 兼容IE浏览器 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 视口适配优化，保证移动端体验 -->
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>daisuke</title>
    <!-- 阿里云播放器样式 -->
    <link rel="stylesheet" href="https://g.alicdn.com/de/prismplayer/2.9.0/skins/default/aliplayer-min.css">
    <style>
        /* 全局样式重置，消除默认边距 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #f5f5f5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        /* 播放器容器优化：自适应高度+居中 */
        #player-con {
            width: 100%;
            max-width: 1200px;
            /* 移动端适配高度，PC端最大500px */
            height: calc(100vh - 80px) !important;
            max-height: 500px;
            background-color: #000;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }

        /* 提示文本样式 */
        .tip-text {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- 播放器容器 -->
    <div class="prism-player" id="player-con"></div>
    <!-- 加载/错误提示 -->
    <p class="tip-text" id="player-tip">视频加载中...</p>

    <!-- 阿里云播放器脚本 -->
    <script type="text/javascript" charset="utf-8" src="https://g.alicdn.com/de/prismplayer/2.9.0/aliplayer-min.js"></script>
    <script>
        // 播放器初始化函数
        function initAliPlayer() {
            // 检测播放器脚本是否加载成功
            if (typeof Aliplayer === 'undefined') {
                document.getElementById('player-tip').textContent = '播放器加载失败，请刷新页面重试！';
                return;
            }

            var player = new Aliplayer({
                "id": "player-con",
                "source": "daisuke.mp4", // 本地视频文件，需确保文件与HTML同目录
                "width": "100%",
                "height": "100%", // 改为100%，由CSS控制实际高度
                "autoplay": true,
                "muted": true, // 静音自动播放（解决浏览器自动播放限制）
                "isLive": false,
                "rePlay": false,
                "playsinline": true, // 移动端内联播放，不跳全屏
                "preload": "auto", // 明确预加载策略
                "controlBarVisibility": "hover", // 鼠标悬停显示控制栏
                "useH5Prism": true, // 强制使用H5播放器
                "language": "zh-cn", // 控件显示中文
                "volume": 0.7, // 默认音量
                "enablePlaybackSpeed": true, // 开启倍速播放
                "playbackSpeed": [0.5, 1, 1.5, 2] // 倍速选项
            }, function (player) {
                console.log("播放器初始化成功");
                document.getElementById('player-tip').textContent = ''; // 清空加载提示
            });

            // 播放状态监听
            // 播放开始
            player.on('play', function () {
                console.log("视频开始播放");
            });

            // 播放暂停
            player.on('pause', function () {
                console.log("视频暂停播放");
            });

            // 播放结束
            player.on('ended', function () {
                console.log("视频播放结束");
                document.getElementById('player-tip').textContent = '视频播放完毕';
            });

            // 错误监听（核心：捕获播放失败问题）
            player.on('error', function (err) {
                console.error("播放器错误：", err);
                document.getElementById('player-tip').textContent = '视频播放失败！请检查文件路径（daisuke.mp4）是否正确';
            });

            // 加载失败监听
            player.on('stalled', function () {
                document.getElementById('player-tip').textContent = '视频加载卡顿，请检查网络或文件';
            });

            // 页面关闭时销毁播放器，释放资源
            window.addEventListener('beforeunload', function () {
                player.dispose();
            });
        }

        // 页面加载完成后初始化播放器（避免DOM未加载完成的问题）
        document.addEventListener('DOMContentLoaded', initAliPlayer);
    </script>
</body>
</html>
